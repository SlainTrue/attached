{"name":"Attached","tagline":"A file attachment tool that lets users upload to the cloud","body":"# Attached\r\n\r\nAttached is a Ruby on Rails file attachment tool that lets users upload to the cloud. The gem supports AWS, Google and Rackspace for storage networks by default. It is influenced (and copied) from Paperclip and makes heavy use of the incredibly awesome Fog library.\r\n\r\n## Requirements\r\n\r\nThe gem is tested with:\r\n\r\n* Ruby on Rails 3.1.2\r\n* Ruby (MRI) 1.9.3 (p0)\r\n* Ruby (MRI) 1.9.2 (p290)\r\n* Ruby (MRI) 1.8.7 (p352)\r\n* Ruby (REE) 1.8.7 (2011.03)\r\n* JRuby 1.6.5\r\n* Rubinius 1.2.4\r\n\r\n## Installation\r\n\r\n  gem install attached\r\n\r\n## Optional\r\n\r\n  brew install imagemagick\r\n  brew install lame\r\n\r\n## Examples\r\n\r\nMigration:\r\n\r\n    rails g model video name:string encoding:attached\r\n\r\n    class CreateVideo < ActiveRecord::Migration\r\n      def self.up\r\n        create_table :videos do |t|\r\n          t.string :name\r\n          t.attachment :encoding\r\n\r\n          t.timestamps\r\n        end\r\n      end\r\n\r\n      def self.down\r\n        drop_table :videos\r\n      end\r\n    end\r\n\r\nModel:\r\n\r\n    class Video < ActiveRecord::Base\r\n  \r\n      has_attached :encoding, styles: { \r\n        webm: { extension: '.webm' },\r\n        mp4:  { extension: '.mp4'  },\r\n        ogv:  { extension: '.ogv'  },\r\n      }\r\n  \r\n      after_save do\r\n        remote.encode(self.encoding.url)\r\n      end\r\n  \r\n    end\r\n  \r\nForm:\r\n\r\n    <%= form_for @video, html: { multipart: true } do |form| %>\r\n      <%= form.file_field :encoding %>\r\n    <% end %>\r\n  \r\nView:\r\n\r\n    <video>\r\n      <source src=\"<%= @video.encoding.url(:webm)\" />\r\n      <source src=\"<%= @video.encoding.url(:mp4) %>\" />\r\n      <source src=\"<%= @video.encoding.url(:ogg) %>\" />\r\n    </video>\r\n  \r\n## Advanced\r\n\r\n### Validations\r\n\r\n    # app/models/person.rb\r\n    validates_attached_presence :file\r\n    validates_attached_size :file, in: 2.kilobytes..2.megabytes\r\n    validates_attached_extension :file, in: %w(jpe jpg jpeg png)\r\n\r\n### Storage\r\n\r\n    # app/models/user.rb\r\n    has_attached :file, medium: :aws, credentials: \"#{Rails.root}/config/aws.yml\"\r\n\r\n    # app/models/user.rb\r\n    has_attached :file, medium: :google, credentials: \"#{Rails.root}/config/google.yml\"\r\n\r\n    # app/models/user.rb\r\n    has_attached :file, medium: :rackspace, credentials: \"#{Rails.root}/config/rackspace.yml\"\r\n\r\n    # config/initializers/attached.rb\r\n    Attached::Attachment.options[:medium] = :aws\r\n    Attached::Attachment.options[:credentials] = \"#{Rails.root}/config/aws.yml\"\r\n\r\n    # config/initializers/attached.rb\r\n    Attached::Attachment.options[:medium] = :google\r\n    Attached::Attachment.options[:credentials] = \"#{Rails.root}/config/google.yml\"\r\n\r\n    # config/initializers/attached.rb\r\n    Attached::Attachment.options[:medium] = :rackspace\r\n    Attached::Attachment.options[:credentials] = \"#{Rails.root}/config/rackspace.yml\"\r\n\r\n### Processors\r\n\r\n    # app/models/image.rb\r\n    has_attached :file, processor: :image, styles: {\r\n      small:   { size: '200x200>', extension: '.jpg', quality: 90 },\r\n      large:   { size: '400x400<', extension: '.jpg', quality: 90 },\r\n      default: { size: '300x300#', extension: '.jpg', quality: 90 },\r\n    }\r\n  \r\n    # app/models/image.rb\r\n    has_attached :file, processor: :image, styles: {\r\n      small:   { operation: :decrease, width: 200, height: 200, extension: '.jpg', quality: 90 },\r\n      large:   { operation: :increase, width: 400, height: 400, extension: '.jpg', quality: 90 },\r\n      default: { operation: :resize,   width: 300, height: 300, extension: '.jpg', quality: 90 },\r\n    }\r\n  \r\n    # app/models/audio.rb\r\n    has_attached :file, processor: :audio, styles: {\r\n      full:  { preset: '320kbps', extension: '.wav' },\r\n      large: { preset: '256kbps', extension: '.wav' },\r\n      small: { preset: '128kbps', extension: '.wav' },\r\n    }\r\n  \r\n    # app/models/audio.rb\r\n    has_attached :file, processor: :audio, styles: {\r\n      full:  { preset: '320kbps', extension: '.wav' },\r\n      large: { preset: '256kbps', extension: '.wav' },\r\n      small: { preset: '128kbps', extension: '.wav' },\r\n    }\r\n  \r\n    # app/models/audio.rb\r\n    has_attached :file, processor: :audio, styles: {\r\n      full:  { preset: 'insane',  extension: '.wav' },\r\n      large: { preset: 'extreme', extension: '.wav' },\r\n      small: { preset: 'medium',  extension: '.wav' },\r\n    }\r\n  \r\n### Strategies\r\n\r\n    # app/models/sample.rb\r\n    has_attached :file, processor: ..., styles: { ... }, strategy: :delay\r\n    has_attached :file, processor: ..., styles: { ... }, strategy: :cache\r\n  \r\n### Reprocessing\r\n\r\n    rake attached:process[Image,file]\r\n    rake attached:process[Audio,file]\r\n  \r\n### Aliases\r\n\r\n    # app/initializer/attached.rb\r\n    Attached::Attachment.options[:alias] = http://storage.ksylvest.com/\r\n\r\n    # app/initializer/attached.rb\r\n    Attached::Attachment.options[:aliases] = %w(\r\n      http://a.storage.ksylvest.com/\r\n      http://b.storage.ksylvest.com/\r\n      http://c.storage.ksylvest.com/\r\n      http://d.storage.ksylvest.com/\r\n    )\r\n","google":"UA-31911059-1","note":"Don't delete this file! It's used internally to help with page regeneration."}